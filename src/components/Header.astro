---
import { Menu, X } from 'lucide-react';
import logoDar from '../../assets/logos/dar/logo.png';
---

<header class="fixed top-0 left-0 right-0 z-50 bg-gradient-to-r from-dark-teal-dark via-dark-teal to-dark-teal-light border-b border-rose-gold/20 shadow-lg backdrop-blur-sm">
  <div class="max-w-7xl mx-auto px-8 sm:px-12 lg:px-16 w-full">
    <nav class="flex items-center justify-between h-16 relative">
      <!-- Logo -->
      <a href="/" class="flex items-center hover:opacity-80 transition-opacity relative z-50">
        <img src={logoDar.src} alt="DAR Casa de la PerfumerÃ­a" class="h-12 w-auto" />
      </a>

      <!-- Desktop Navigation -->
      <div class="hidden lg:flex items-center space-x-8">
        <a href="/" class="text-slate-300 hover:text-rose-gold transition-colors font-medium text-lg">
          Inicio
        </a>
        <a href="/fragancias" class="text-slate-300 hover:text-rose-gold transition-colors font-medium text-lg">
          Fragancias
        </a>
        <a href="/contact" class="text-slate-300 hover:text-rose-gold transition-colors font-medium text-lg">
          Contacto
        </a>
      </div>

      <!-- Mobile Menu Button -->
      <button 
        id="mobile-menu-button" 
        type="button"
        aria-label="Toggle menu"
        class="lg:hidden flex flex-col items-center justify-center w-10 h-10 space-y-1.5 group relative z-50">
        <span id="line-1" class="block w-6 h-0.5 bg-rose-gold transition-all duration-300"></span>
        <span id="line-2" class="block w-6 h-0.5 bg-rose-gold transition-all duration-300"></span>
        <span id="line-3" class="block w-6 h-0.5 bg-rose-gold transition-all duration-300"></span>
      </button>
    </nav>
  </div>

  <!-- Mobile Menu - Dropdown Style like Nemco-Net -->
  <div id="mobile-menu" class="lg:hidden fixed top-16 left-0 right-0 bg-gradient-to-b from-slate-900 to-slate-800 border-b border-rose-gold/30 shadow-2xl transform -translate-y-full opacity-0 transition-all duration-300 ease-out overflow-hidden z-40">
    <nav class="px-6 py-6 space-y-2">
      <a href="/" class="block text-slate-200 hover:text-rose-gold hover:bg-slate-700/60 transition-all font-medium py-4 px-5 rounded-xl text-base">
        Inicio
      </a>
      <a href="/fragancias" class="block text-slate-200 hover:text-rose-gold hover:bg-slate-700/60 transition-all font-medium py-4 px-5 rounded-xl text-base">
        Fragancias
      </a>
      <a href="/contact" class="block text-slate-200 hover:text-rose-gold hover:bg-slate-700/60 transition-all font-medium py-4 px-5 rounded-xl text-base">
        Contacto
      </a>
    </nav>
  </div>
</header>

<script is:inline>
  document.addEventListener('DOMContentLoaded', function() {
    // Mobile menu elements
    const mobileMenuButton = document.getElementById('mobile-menu-button');
    const mobileMenu = document.getElementById('mobile-menu');
    const line1 = document.getElementById('line-1');
    const line2 = document.getElementById('line-2');
    const line3 = document.getElementById('line-3');
    let isMenuOpen = false;

    // Function to open menu
    function openMenu() {
      if (!mobileMenu || !line1 || !line2 || !line3) return;
      
      isMenuOpen = true;
      mobileMenu.classList.remove('-translate-y-full', 'opacity-0');
      mobileMenu.classList.add('translate-y-0', 'opacity-100');
      
      // Animate hamburger to X
      line1.classList.add('rotate-45', 'translate-y-2');
      line2.classList.add('opacity-0');
      line3.classList.add('-rotate-45', '-translate-y-2');
    }

    // Function to close menu
    function closeMenu() {
      if (!mobileMenu || !line1 || !line2 || !line3) return;
      
      isMenuOpen = false;
      mobileMenu.classList.add('-translate-y-full', 'opacity-0');
      mobileMenu.classList.remove('translate-y-0', 'opacity-100');
      
      // Animate X back to hamburger
      line1.classList.remove('rotate-45', 'translate-y-2');
      line2.classList.remove('opacity-0');
      line3.classList.remove('-rotate-45', '-translate-y-2');
    }

    // Toggle menu
    if (mobileMenuButton) {
      mobileMenuButton.addEventListener('click', function(e) {
        e.preventDefault();
        e.stopPropagation();
        
        if (isMenuOpen) {
          closeMenu();
        } else {
          openMenu();
        }
      });
    }

    // Close mobile menu when clicking on a link
    if (mobileMenu) {
      const mobileMenuLinks = mobileMenu.querySelectorAll('a');
      mobileMenuLinks.forEach(function(link) {
        link.addEventListener('click', function() {
          closeMenu();
        });
      });
    }

    // Close menu when clicking outside
    document.addEventListener('click', function(e) {
      if (isMenuOpen && mobileMenu && mobileMenuButton) {
        if (!mobileMenu.contains(e.target) && !mobileMenuButton.contains(e.target)) {
          closeMenu();
        }
      }
    });
  });
</script>

<style>
  /* Smooth transitions for mobile menu */
  #mobile-menu {
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.3s ease-out;
  }
  
  /* Header backdrop blur enhancement */
  header {
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
  }
  
  /* Hamburger menu animation */
  #line-1, #line-2, #line-3 {
    transform-origin: center;
  }
</style>